<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Atelier - Dashboard Marseille</title>
<style>
body { font-family: Arial, sans-serif; text-align:center; background:#eef2f7; margin:0; padding:20px; }
h1 { margin-top:20px; }
.dashboard { display:flex; flex-wrap:wrap; justify-content:center; gap:40px; margin-top:30px; }

/* Carte indicateur */
.card { background:white; padding:20px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); width:220px; }

/* Jauge vent */
.gauge { width:180px; height:90px; background:#eee; border-radius:100px 100px 0 0; position:relative; overflow:hidden; margin:auto; }
.needle { width:4px; height:100%; position:absolute; bottom:0; left:50%; transform-origin:bottom center; }

/* Barre humidité */
.bar-container { width:180px; height:20px; background:#ddd; border-radius:10px; margin:20px auto; }
.bar { height:100%; border-radius:10px; text-align:right; padding-right:5px; color:white; font-weight:bold; }

/* Température + sparkline */
.temp { font-size:24px; font-weight:bold; margin-bottom:10px; }
.sparkline { display:flex; gap:2px; justify-content:center; }
.sparkline div { width:4px; background:orange; height:20px; }

/* Bouton retour */
a.back { display:inline-block; margin-top:30px; text-decoration:none; color:#333; padding:10px 20px; border:1px solid #333; border-radius:5px; }
</style>
</head>
<body>

<h1>Dashboard météo - Marseille</h1>

<div class="dashboard">

  <!-- Vitesse du vent -->
  <div class="card">
    <div class="gauge">
      <div class="needle" style="transform: rotate({{ indicators.wind * 1.8 }}deg);
          background:{% if indicators.wind < 25 %}green{% elif indicators.wind < 50 %}yellow{% else %}red{% endif %};">
      </div>
    </div>
    <div>Vent : {{ indicators.wind }} km/h</div>
  </div>

  <!-- Humidité -->
  <div class="card">
    <div>Humidité :</div>
    <div class="bar-container">
      <div class="bar" style="width: {{ indicators.humidity }}%; background:#4caf50;">
        {{ indicators.humidity }}%
      </div>
    </div>
  </div>

  <!-- Température + Sparkline -->
  <div class="card">
    <div class="temp" style="color:{% if indicators.temp >= 25 %}red{% elif indicators.temp >= 15 %}orange{% else %}blue{% endif %}">
      {{ indicators.temp }} °C
    </div>
    <div class="sparkline">
      {% for s in indicators.sparkline %}
        <div style="height: {{ s }}px;"></div>
      {% endfor %}
    </div>
    <div>Température 24h</div>
  </div>

  <!-- Précipitations -->
  <div class="card">
    <div>Précipitations : {{ indicators.precip }} mm</div>
    <div class="bar-container">
      <div class="bar" style="width: {{ indicators.precip * 10 }}px; background:#2196F3;"></div>
    </div>
  </div>

  <!-- Direction du vent -->
  <div class="card" style="position:relative; height:120px;">
    <div style="width:2px; height:50px; background:black; position:absolute; bottom:0; left:50%; transform-origin:bottom center; transform: rotate({{ indicators.wind_dir }}deg);"></div>
    <div style="margin-top:70px;">Direction du vent</div>
  </div>

</div>

<a class="back" href="/">← Retour à l'accueil</a>

</body>
</html>
